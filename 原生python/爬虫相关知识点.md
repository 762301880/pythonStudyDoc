#  xpath

XPath 是 XML Path Language 的缩写，是一种用于在 XML 文档中定位和选择节点的查询语言。它最初是为 XML 设计的，但现在也广泛应用于 HTML 文档的解析（尤其是在网页爬虫和数据提取场景中）。

XPath 的主要作用是通过路径表达式来选取 XML/HTML 文档中的节点或节点集，类似文件系统中通过路径查找文件的方式。

### XPath 的核心特点：

1. **路径表达式**：使用类似文件路径的语法定位节点，例如：
   - `/html/body/div`：选取根节点 `html` 下的 `body` 下的所有 `div` 节点
   - `//p`：选取文档中所有 `p` 节点（无论位置）
   - `//div[@class='container']`：选取所有带有 `class="container"` 属性的 `div` 节点
2. **支持多种节点类型**：可以选取元素、属性、文本、注释等各种节点类型，例如：
   - `//@href`：选取所有 `href` 属性
   - `//p/text()`：选取所有 `p` 元素的文本内容
3. **强大的筛选能力**：可以通过谓语（Predicate）对节点进行筛选，例如：
   - `//li[last()]`：选取最后一个 `li` 节点
   - `//book[@price>30]`：选取 `price` 属性大于 30 的 `book` 节点

### 常见应用场景：

- 网页数据爬取（如使用 Python 的 lxml、Scrapy 框架）
- XML 文档解析和数据提取
- 自动化测试中定位网页元素（如 Selenium）

例如，在网页爬虫中，使用 XPath 可以精准提取所需数据：

```python
# 使用 lxml 库解析 HTML 并应用 XPath
from lxml import etree

html = """
<html>
  <body>
    <ul>
      <li class="item">苹果</li>
      <li class="item">香蕉</li>
    </ul>
  </body>
</html>
"""

tree = etree.HTML(html)
# 提取所有 class 为 item 的 li 元素的文本
items = tree.xpath("//li[@class='item']/text()")
print(items)  # 输出: ['苹果', '香蕉']
```

XPath 提供了灵活且强大的节点选择能力，是处理 XML/HTML 文档时的重要工具。